以下是一份关于 **strace** 基本使用的简介和示例说明：

---

### 1. 概述

**strace** 是 Linux 下的一个强大的调试工具，用于跟踪进程与内核之间的交互。它可以捕获进程执行期间发生的所有系统调用和接收到的信号，从而帮助开发者和运维人员分析程序行为、排查问题和调试程序崩溃等问题 

---

### 2. 基本用法

#### （1）追踪新进程

直接在命令前加上 `strace`，启动并跟踪程序。例如：

```bash
strace ls
```

这条命令将启动 `ls` 并打印该程序执行过程中调用的所有系统调用。

#### （2）附加到正在运行的进程

如果想要调试一个已经运行的程序，可以使用 `-p` 参数来附加到该进程。假设进程号为 1234：

```bash
strace -p 1234
```

这样就可以观察该进程后续的系统调用了

#### （3）跟踪子进程

有时程序会派生出多个子进程，使用 `-f` 参数可以让 strace 同时跟踪这些子进程：

```bash
strace -f 程序名
```

#### （4）过滤特定系统调用

为了减少输出信息，可以只跟踪感兴趣的系统调用。使用 `-e trace=` 参数，例如：

```bash
strace -e trace=open,read ls
```

这条命令仅显示 `open` 和 `read` 两个系统调用的执行情况 

#### （5）将输出保存到文件

如果希望将跟踪结果写入到文件中以便后续查看，可以使用 `-o` 参数：

```bash
strace -o output.log ls
```

这将把输出保存到 `output.log` 文件中。

---

### 3. 输出解释

在 strace 的输出中，每一行通常会显示一个系统调用的名称、传入的参数以及返回值。例如：

```bash
open("/etc/ld.so.cache", O_RDONLY) = 3
```

这表示程序调用了 `open` 系统调用，以只读方式打开文件 `/etc/ld.so.cache`，并返回文件描述符 3。类似的输出可以帮助你了解程序如何与操作系统进行交互 。

---

### 4. 常用参数汇总

- **-p PID**：附加到指定的进程。
- **-f**：跟踪进程的所有子进程。
- **-e trace=XXX**：过滤显示特定的系统调用（如 `open`、`read` 等）。
- **-o FILE**：将输出写入指定文件。

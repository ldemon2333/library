# 条件变量
不自旋实现，把条件用一个变量来代替
- 条件不满足时等待（进入睡眠），条件满足时唤醒所有进程查看自己要等待的条件是否已满足broadcast()

![[Pasted image 20241028133317.png]]

# 同步机制的应用
实现任意计算图
计算任务构成有向无环图，只需要一个全局条件变量，broadcast()
线程池，利用生产者和消费者
![[Pasted image 20241028135050.png]]

## 实现2
为每个节点设置一个条件变量
![[Pasted image 20241028135152.png]]

## Take-away Messages
同步的本质是线程需要等待某件它所预期的事件发生，而事件的发生总是可以用条件 (例如 depth 满足某个条件，或是程序处于某个特定的状态) 来表达。因此计算机系统的设计者实现了条件变量，将条件检查和临界区 “放在一起”，以实现线程间的同步。
  # 15.1 进程的地址空间
状态机的视角
- 地址空间=带访问权限的内存段
- 管理=增加/删除/修改一段可访问的内存
![[Pasted image 20241104154437.png]]

![[Pasted image 20241104154217.png]]

# 15.2 入侵进程地址空间
![[Pasted image 20241104154530.png]]

![[Pasted image 20241104154450.png]]


# 15.3 给进程发送GUI事件
![[Pasted image 20241104154655.png]]

# 15.4 改变进程对时间的感知
变速齿轮，通过“劫持”时间相关的函数或系统调用，注意真实的应用程序访问时钟的方式是多样的，可能通过设置闹钟，或是通过接收窗口管理器的时钟事件。

通过patch 函数的头部为一个跳转实现对一个函数的 "运行时热更新"

# Take-away Messages
状态机的视角自然地将我们引入 “内存到底是什么” 的问题——它的答案同样也很自然：带有访问权限控制的连续内存段。我们可以通过 mmap、munmap、mprotect 三个系统调用调整状态机的地址空间，包括分配匿名的内存、映射文件内容到内存、修改访问权限等。更有趣的是操作系统有 “能够实现一切应用程序” 的需求，调试器也不在话下——这也给了我们入侵其他进程地址空间的机制。
Goçš„httpæœ‰ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼šConnã€ServeMux

# Conn çš„ goroutine
ä¸æˆ‘ä»¬ä¸€èˆ¬ç¼–å†™çš„httpæœåŠ¡å™¨ä¸åŒ, Goä¸ºäº†å®ç°é«˜å¹¶å‘å’Œé«˜æ€§èƒ½, ä½¿ç”¨äº†goroutinesæ¥å¤„ç†Connçš„è¯»å†™äº‹ä»¶, è¿™æ ·æ¯ä¸ªè¯·æ±‚éƒ½èƒ½ä¿æŒç‹¬ç«‹ï¼Œç›¸äº’ä¸ä¼šé˜»å¡ï¼Œå¯ä»¥é«˜æ•ˆçš„å“åº”ç½‘ç»œäº‹ä»¶ã€‚è¿™æ˜¯Goé«˜æ•ˆçš„ä¿è¯ã€‚

Goåœ¨ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚é‡Œé¢æ˜¯è¿™æ ·å†™çš„ï¼š
```
c, err := srv.newConn(rw)
if err != nil {
	continue
}
go c.serve()
```
è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªConnï¼Œè¿™ä¸ªConné‡Œé¢ä¿å­˜äº†è¯¥æ¬¡è¯·æ±‚çš„ä¿¡æ¯ï¼Œç„¶åå†ä¼ é€’åˆ°å¯¹åº”çš„handlerï¼Œè¯¥handlerä¸­ä¾¿å¯ä»¥è¯»å–åˆ°ç›¸åº”çš„headerä¿¡æ¯ï¼Œè¿™æ ·ä¿è¯äº†æ¯ä¸ªè¯·æ±‚çš„ç‹¬ç«‹æ€§ã€‚

# ServeMux çš„è‡ªå®šä¹‰
æˆ‘ä»¬å‰é¢å°èŠ‚è®²è¿°conn.serverçš„æ—¶å€™ï¼Œå…¶å®å†…éƒ¨æ˜¯è°ƒç”¨äº†httpåŒ…é»˜è®¤çš„è·¯ç”±å™¨ï¼Œé€šè¿‡è·¯ç”±å™¨æŠŠæœ¬æ¬¡è¯·æ±‚çš„ä¿¡æ¯ä¼ é€’åˆ°äº†åç«¯çš„å¤„ç†å‡½æ•°ã€‚é‚£ä¹ˆè¿™ä¸ªè·¯ç”±å™¨æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ

æˆ‘ä»¬äº†è§£äº†æ•´ä¸ªè·¯ç”±è¿‡ç¨‹ï¼ŒGoå…¶å®æ”¯æŒå¤–éƒ¨å®ç°çš„è·¯ç”±å™¨Â `ListenAndServe`çš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ç”¨ä»¥é…ç½®å¤–éƒ¨è·¯ç”±å™¨çš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªHandleræ¥å£ï¼Œå³å¤–éƒ¨è·¯ç”±å™¨åªè¦å®ç°äº†Handleræ¥å£å°±å¯ä»¥,æˆ‘ä»¬å¯ä»¥åœ¨è‡ªå·±å®ç°çš„è·¯ç”±å™¨çš„ServeHTTPé‡Œé¢å®ç°è‡ªå®šä¹‰è·¯ç”±åŠŸèƒ½ã€‚

å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬è‡ªå·±å®ç°äº†ä¸€ä¸ªç®€æ˜“çš„è·¯ç”±å™¨
```

package main

import (
	"fmt"
	"net/http"
)

type MyMux struct {
}

func (p *MyMux) ServeHTTP(w http.ResponseWriter, r *http.Request) {
	if r.URL.Path == "/" {
		sayhelloName(w, r)
		return
	}
	http.NotFound(w, r)
	return
}

func sayhelloName(w http.ResponseWriter, r *http.Request) {
	fmt.Fprintf(w, "Hello myroute!")
}

func main() {
	mux := &MyMux{}
	http.ListenAndServe(":9090", mux)
}
```

# Go ä»£ç çš„æ‰§è¡Œæµç¨‹
é€šè¿‡å¯¹httpåŒ…çš„åˆ†æä¹‹åï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹æ•´ä¸ªçš„ä»£ç æ‰§è¡Œè¿‡ç¨‹ã€‚

- é¦–å…ˆè°ƒç”¨Http.HandleFunc
    
    æŒ‰é¡ºåºåšäº†å‡ ä»¶äº‹ï¼š
    
    1 è°ƒç”¨äº†DefaultServeMuxçš„HandleFunc
    
    2 è°ƒç”¨äº†DefaultServeMuxçš„Handle
    
    3 å¾€DefaultServeMuxçš„map[string]muxEntryä¸­å¢åŠ å¯¹åº”çš„handlerå’Œè·¯ç”±è§„åˆ™
    
- å…¶æ¬¡è°ƒç”¨http.ListenAndServe(":9090", nil)
    
    æŒ‰é¡ºåºåšäº†å‡ ä»¶äº‹æƒ…ï¼š
    
    1 å®ä¾‹åŒ–Server
    
    2 è°ƒç”¨Serverçš„ListenAndServe()
    
    3 è°ƒç”¨net.Listen("tcp", addr)ç›‘å¬ç«¯å£
    
    4 å¯åŠ¨ä¸€ä¸ªforå¾ªç¯ï¼Œåœ¨å¾ªç¯ä½“ä¸­Acceptè¯·æ±‚
    
    5 å¯¹æ¯ä¸ªè¯·æ±‚å®ä¾‹åŒ–ä¸€ä¸ªConnï¼Œå¹¶ä¸”å¼€å¯ä¸€ä¸ªgoroutineä¸ºè¿™ä¸ªè¯·æ±‚è¿›è¡ŒæœåŠ¡go c.serve()
    
    6 è¯»å–æ¯ä¸ªè¯·æ±‚çš„å†…å®¹w, err := c.readRequest()
    
    7 åˆ¤æ–­handleræ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®handlerï¼ˆè¿™ä¸ªä¾‹å­å°±æ²¡æœ‰è®¾ç½®handlerï¼‰ï¼Œhandlerå°±è®¾ç½®ä¸ºDefaultServeMux
    
    8 è°ƒç”¨handlerçš„ServeHttp
    
    9 åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸‹é¢å°±è¿›å…¥åˆ°DefaultServeMux.ServeHttp
    
    10 æ ¹æ®requesté€‰æ‹©handlerï¼Œå¹¶ä¸”è¿›å…¥åˆ°è¿™ä¸ªhandlerçš„ServeHTTP
    
    ```roff
      mux.handler(r).ServeHTTP(w, r)
    ```
    
    11 é€‰æ‹©handlerï¼š
    
    A åˆ¤æ–­æ˜¯å¦æœ‰è·¯ç”±èƒ½æ»¡è¶³è¿™ä¸ªrequestï¼ˆå¾ªç¯éå†ServeMuxçš„muxEntryï¼‰
    
    B å¦‚æœæœ‰è·¯ç”±æ»¡è¶³ï¼Œè°ƒç”¨è¿™ä¸ªè·¯ç”±handlerçš„ServeHTTP
    
    C å¦‚æœæ²¡æœ‰è·¯ç”±æ»¡è¶³ï¼Œè°ƒç”¨NotFoundHandlerçš„ServeHTTP


ä»”ç»†é˜…è¯»`net/http`åŒ…ä¸­`HandleFunc()`å‡½æ•°çš„æºç ï¼š
```golang
func HandleFunc(pattern string, handler func(ResponseWriter, *Request)) {
  DefaultServeMux.HandleFunc(pattern, handler)
}
```

æˆ‘ä»¬å‘ç°å®ƒç›´æ¥è°ƒç”¨äº†ä¸€ä¸ªåä¸º`DefaultServeMux`å¯¹è±¡çš„`HandleFunc()`æ–¹æ³•ã€‚`DefaultServeMux`æ˜¯`ServeMux`ç±»å‹çš„å®ä¾‹ï¼š
```golang
type ServeMux struct {
  mu    sync.RWMutex
  m     map[string]muxEntry
  es    []muxEntry // slice of entries sorted from longest to shortest.
  hosts bool       // whether any patterns contain hostnames
}

var DefaultServeMux = &defaultServeMux
var defaultServeMux ServeMux
```

**åƒè¿™ç§æä¾›é»˜è®¤ç±»å‹å®ä¾‹çš„ç”¨æ³•åœ¨ Go è¯­è¨€çš„å„ä¸ªåº“ä¸­éå¸¸å¸¸è§ï¼Œåœ¨é»˜è®¤å‚æ•°å°±å·²ç»è¶³å¤Ÿçš„åœºæ™¯ä¸­ä½¿ç”¨é»˜è®¤å®ç°å¾ˆæ–¹ä¾¿**ã€‚`ServeMux`ä¿å­˜äº†æ³¨å†Œçš„æ‰€æœ‰è·¯å¾„å’Œå¤„ç†å‡½æ•°çš„å¯¹åº”å…³ç³»ã€‚`ServeMux.HandleFunc()`æ–¹æ³•å¦‚ä¸‹ï¼š

```golang
func (mux *ServeMux) HandleFunc(pattern string, handler func(ResponseWriter, *Request)) {
  mux.Handle(pattern, HandlerFunc(handler))
}
```

è¿™é‡Œå°†å¤„ç†å‡½æ•°`handler`è½¬ä¸º`HandlerFunc`ç±»å‹ï¼Œç„¶åè°ƒç”¨`ServeMux.Handle()`æ–¹æ³•æ³¨å†Œã€‚æ³¨æ„è¿™é‡Œçš„`HandlerFunc(handler)`æ˜¯ç±»å‹è½¬æ¢ï¼Œè€Œéå‡½æ•°è°ƒç”¨ï¼Œç±»å‹`HandlerFunc`çš„å®šä¹‰å¦‚ä¸‹ï¼š
```golang
type HandlerFunc func(ResponseWriter, *Request)

func (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) {
  f(w, r)
}
```

`HandlerFunc`å®é™…ä¸Šæ˜¯ä»¥å‡½æ•°ç±»å‹`func(ResponseWriter, *Request)`ä¸ºåº•å±‚ç±»å‹ï¼Œä¸º`HandlerFunc`ç±»å‹å®šä¹‰äº†æ–¹æ³•`ServeHTTP`ã€‚æ˜¯çš„ï¼ŒGo è¯­è¨€å…è®¸ä¸ºï¼ˆåŸºäºï¼‰å‡½æ•°çš„ç±»å‹å®šä¹‰æ–¹æ³•ã€‚`Serve.Handle()`æ–¹æ³•åªæ¥å—ç±»å‹ä¸ºæ¥å£`Handler`çš„å‚æ•°ï¼š

![[Pasted image 20250214110427.png]]

æ˜¾ç„¶`HandlerFunc`å®ç°äº†æ¥å£`Handler`ã€‚`HandlerFunc`ç±»å‹åªæ˜¯ä¸ºäº†æ–¹ä¾¿æ³¨å†Œå‡½æ•°ç±»å‹çš„å¤„ç†å™¨ã€‚æˆ‘ä»¬å½“ç„¶å¯ä»¥ç›´æ¥å®šä¹‰ä¸€ä¸ªå®ç°`Handler`æ¥å£çš„ç±»å‹ï¼Œç„¶åæ³¨å†Œè¯¥ç±»å‹çš„å®ä¾‹ï¼š
![[Pasted image 20250214110549.png]]

æˆ‘ä»¬åŸºäº`string`ç±»å‹å®šä¹‰äº†ä¸€ä¸ªæ–°ç±»å‹`greeting`ï¼Œç„¶åä¸ºå®ƒå®šä¹‰ä¸€ä¸ªæ–¹æ³•`ServeHTTP()`ï¼ˆå®ç°æ¥å£`Handler`ï¼‰ï¼Œæœ€åè°ƒç”¨`http.Handle()`æ–¹æ³•æ³¨å†Œè¯¥å¤„ç†å™¨ã€‚

ä¸ºäº†ä¾¿äºåŒºåˆ†ï¼Œæˆ‘ä»¬å°†é€šè¿‡`HandleFunc()`æ³¨å†Œçš„ç§°ä¸ºå¤„ç†å‡½æ•°ï¼Œå°†é€šè¿‡`Handle()`æ³¨å†Œçš„ç§°ä¸ºå¤„ç†å™¨ã€‚é€šè¿‡ä¸Šé¢çš„æºç åˆ†æä¸éš¾çœ‹å‡ºï¼Œå®ƒä»¬åœ¨åº•å±‚æœ¬è´¨ä¸Šæ˜¯ä¸€å›äº‹ã€‚

æ³¨å†Œäº†å¤„ç†é€»è¾‘åï¼Œè°ƒç”¨`http.ListenAndServe(":8080", nil)`ç›‘å¬æœ¬åœ°è®¡ç®—æœºçš„ 8080 ç«¯å£ï¼Œå¼€å§‹å¤„ç†è¯·æ±‚ã€‚ä¸‹é¢çœ‹æºç çš„å¤„ç†ï¼š
![[Pasted image 20250214110911.png]]
`ListenAndServe`åˆ›å»ºäº†ä¸€ä¸ª`Server`ç±»å‹çš„å¯¹è±¡ï¼š
![[Pasted image 20250214110929.png]]
`Server`ç»“æ„ä½“æœ‰æ¯”è¾ƒå¤šçš„å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›å­—æ®µæ¥è°ƒèŠ‚ Web æœåŠ¡å™¨çš„å‚æ•°ï¼Œå¦‚ä¸Šé¢çš„`ReadTimeout/ReadHeaderTimeout/WriteTimeout/IdleTimeout`ç”¨äºæ§åˆ¶è¯»å†™å’Œç©ºé—²è¶…æ—¶ã€‚åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œå…ˆè°ƒç”¨`net.Listen()`ç›‘å¬ç«¯å£ï¼Œå°†è¿”å›çš„`net.Listener`ä½œä¸ºå‚æ•°è°ƒç”¨`Server.Serve()`æ–¹æ³•ï¼š
![[Pasted image 20250214111029.png]]
åœ¨`Server.Serve()`æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªæ— é™çš„`for`å¾ªç¯ï¼Œä¸åœåœ°è°ƒç”¨`Listener.Accept()`æ–¹æ³•æ¥å—æ–°è¿æ¥ï¼Œå¼€å¯æ–° goroutine å¤„ç†æ–°è¿æ¥ï¼š
![[Pasted image 20250214111051.png]]
è¿™é‡Œæœ‰ä¸€ä¸ª**æŒ‡æ•°é€€é¿ç­–ç•¥**çš„ç”¨æ³•ã€‚å¦‚æœ`l.Accept()`è°ƒç”¨è¿”å›é”™è¯¯ï¼Œæˆ‘ä»¬åˆ¤æ–­è¯¥é”™è¯¯æ˜¯ä¸æ˜¯ä¸´æ—¶æ€§åœ°ï¼ˆ`ne.Temporary()`ï¼‰ã€‚å¦‚æœæ˜¯ä¸´æ—¶æ€§é”™è¯¯ï¼Œ`Sleep`ä¸€å°æ®µæ—¶é—´åé‡è¯•ï¼Œæ¯å‘ç”Ÿä¸€æ¬¡ä¸´æ—¶æ€§é”™è¯¯ï¼Œ`Sleep`çš„æ—¶é—´ç¿»å€ï¼Œæœ€å¤š`Sleep`Â 1sã€‚è·å¾—æ–°è¿æ¥åï¼Œå°†å…¶å°è£…æˆä¸€ä¸ª`conn`å¯¹è±¡ï¼ˆ`srv.newConn(rw)`ï¼‰ï¼Œåˆ›å»ºä¸€ä¸ª goroutine è¿è¡Œå…¶`serve()`æ–¹æ³•ã€‚çœç•¥æ— å…³é€»è¾‘çš„ä»£ç å¦‚ä¸‹ï¼š
![[Pasted image 20250214111313.png]]
`serve()`æ–¹æ³•å…¶å®å°±æ˜¯ä¸åœåœ°è¯»å–å®¢æˆ·ç«¯å‘é€åœ°è¯·æ±‚ï¼Œåˆ›å»º`serverHandler`å¯¹è±¡è°ƒç”¨å…¶`ServeHTTP()`æ–¹æ³•å»å¤„ç†è¯·æ±‚ï¼Œç„¶ååšä¸€äº›æ¸…ç†å·¥ä½œã€‚`serverHandler`åªæ˜¯ä¸€ä¸ªä¸­é—´çš„è¾…åŠ©ç»“æ„ï¼Œä»£ç å¦‚ä¸‹ï¼š
![[Pasted image 20250214111343.png]]
ä»`Server`å¯¹è±¡ä¸­è·å–`Handler`ï¼Œè¿™ä¸ª`Handler`å°±æ˜¯è°ƒç”¨`http.ListenAndServe()`æ—¶ä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚åœ¨`Hello World`çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¼ å…¥äº†`nil`ã€‚æ‰€ä»¥è¿™é‡Œ`handler`ä¼šå–é»˜è®¤å€¼`DefaultServeMux`ã€‚è°ƒç”¨`DefaultServeMux.ServeHTTP()`æ–¹æ³•å¤„ç†è¯·æ±‚ï¼š
![[Pasted image 20250214111551.png]]
`mux.Handler(r)`é€šè¿‡è¯·æ±‚çš„è·¯å¾„ä¿¡æ¯æŸ¥æ‰¾å¤„ç†å™¨ï¼Œç„¶åè°ƒç”¨å¤„ç†å™¨çš„`ServeHTTP()`æ–¹æ³•å¤„ç†è¯·æ±‚ï¼š
![[Pasted image 20250214111601.png]]
ä¸Šé¢çš„ä»£ç çœç•¥äº†å¤§é‡çš„æ— å…³ä»£ç ï¼Œåœ¨`match`æ–¹æ³•ä¸­ï¼Œé¦–å…ˆä¼šæ£€æŸ¥è·¯å¾„æ˜¯å¦ç²¾ç¡®åŒ¹é…`mux.m[path]`ã€‚å¦‚æœä¸èƒ½ç²¾ç¡®åŒ¹é…ï¼Œåé¢çš„`for`å¾ªç¯ä¼šåŒ¹é…è·¯å¾„çš„æœ€é•¿å‰ç¼€ã€‚**åªè¦æ³¨å†Œäº†`/`æ ¹è·¯å¾„å¤„ç†ï¼Œæ‰€æœ‰æœªåŒ¹é…åˆ°çš„è·¯å¾„æœ€ç»ˆéƒ½ä¼šäº¤ç»™`/`è·¯å¾„å¤„ç†**ã€‚ä¸ºäº†ä¿è¯æœ€é•¿å‰ç¼€ä¼˜å…ˆï¼Œåœ¨æ³¨å†Œæ—¶ï¼Œä¼šå¯¹è·¯å¾„è¿›è¡Œæ’åºã€‚æ‰€ä»¥`mux.es`ä¸­å­˜æ”¾çš„æ˜¯æŒ‰è·¯å¾„æ’åºçš„å¤„ç†åˆ—è¡¨ï¼š

è¿è¡Œï¼Œåœ¨æµè§ˆå™¨ä¸­é”®å…¥ç½‘å€`localhost:8080`ï¼Œå¯ä»¥çœ‹åˆ°ç½‘é¡µæ˜¾ç¤º`Hello World`ã€‚é”®å…¥ç½‘å€`localhost:8080/greeting`ï¼Œçœ‹åˆ°ç½‘é¡µæ˜¾ç¤º`Welcome, dj`ã€‚

æ€è€ƒé¢˜ï¼š æ ¹æ®æœ€é•¿å‰ç¼€çš„é€»è¾‘ï¼Œå¦‚æœé”®å…¥`localhost:8080/greeting/a/b/c`ï¼Œåº”è¯¥ä¼šåŒ¹é…`/greeting`è·¯å¾„ã€‚ å¦‚æœé”®å…¥`localhost:8080/a/b/c`ï¼Œåº”è¯¥ä¼šåŒ¹é…`/`è·¯å¾„ã€‚æ˜¯è¿™æ ·ä¹ˆï¼Ÿç­”æ¡ˆæ”¾åœ¨åé¢ğŸ˜€ã€‚


# åˆ›å»º ServeMux
è°ƒç”¨`http.HandleFunc()/http.Handle()`éƒ½æ˜¯å°†å¤„ç†å™¨/å‡½æ•°æ³¨å†Œåˆ°`ServeMux`çš„é»˜è®¤å¯¹è±¡`DefaultServeMux`ä¸Šã€‚ä½¿ç”¨é»˜è®¤å¯¹è±¡æœ‰ä¸€ä¸ªé—®é¢˜ï¼šä¸å¯æ§ã€‚

ä¸€æ¥`Server`å‚æ•°éƒ½ä½¿ç”¨äº†é»˜è®¤å€¼ï¼ŒäºŒæ¥ç¬¬ä¸‰æ–¹åº“ä¹Ÿå¯èƒ½ä½¿ç”¨è¿™ä¸ªé»˜è®¤å¯¹è±¡æ³¨å†Œä¸€äº›å¤„ç†ï¼Œå®¹æ˜“å†²çªã€‚æ›´ä¸¥é‡çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä¸çŸ¥æƒ…ä¸­è°ƒç”¨`http.ListenAndServe()`å¼€å¯ Web æœåŠ¡ï¼Œé‚£ä¹ˆç¬¬ä¸‰æ–¹åº“æ³¨å†Œçš„å¤„ç†é€»è¾‘å°±å¯ä»¥é€šè¿‡ç½‘ç»œè®¿é—®åˆ°ï¼Œæœ‰æå¤§çš„å®‰å…¨éšæ‚£ã€‚æ‰€ä»¥ï¼Œé™¤éåœ¨ç¤ºä¾‹ç¨‹åºä¸­ï¼Œå¦åˆ™å»ºè®®ä¸è¦ä½¿ç”¨é»˜è®¤å¯¹è±¡ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`http.NewServeMux()`åˆ›å»ºä¸€ä¸ªæ–°çš„`ServeMux`å¯¹è±¡ï¼Œç„¶ååˆ›å»º`http.Server`å¯¹è±¡å®šåˆ¶å‚æ•°ï¼Œç”¨`ServeMux`å¯¹è±¡åˆå§‹åŒ–`Server`çš„`Handler`å­—æ®µï¼Œæœ€åè°ƒç”¨`Server.ListenAndServe()`æ–¹æ³•å¼€å¯ Web æœåŠ¡ï¼š
![[Pasted image 20250214112829.png]]
![[Pasted image 20250214112854.png]]
![[Pasted image 20250214112858.png]]
![[Pasted image 20250214213551.png]]
![[Pasted image 20250214214558.png]]

# ä¸­é—´ä»¶
æœ‰æ—¶å€™éœ€è¦åœ¨è¯·æ±‚å¤„ç†ä»£ç ä¸­å¢åŠ ä¸€äº›é€šç”¨çš„é€»è¾‘ï¼Œå¦‚ç»Ÿè®¡å¤„ç†è€—æ—¶ã€è®°å½•æ—¥å¿—ã€æ•è·å®•æœºç­‰ç­‰ã€‚å¦‚æœåœ¨æ¯ä¸ªè¯·æ±‚å¤„ç†å‡½æ•°ä¸­æ·»åŠ è¿™äº›é€»è¾‘ï¼Œä»£ç å¾ˆå¿«å°±ä¼šå˜å¾—ä¸å¯ç»´æŠ¤ï¼Œæ·»åŠ æ–°çš„å¤„ç†å‡½æ•°ä¹Ÿä¼šå˜å¾—éå¸¸ç¹çã€‚æ‰€ä»¥å°±æœ‰äº†ä¸­é—´ä»¶çš„éœ€æ±‚ã€‚

ä¸­é—´ä»¶æœ‰ç‚¹åƒé¢å‘åˆ‡é¢çš„ç¼–ç¨‹æ€æƒ³ï¼Œä½†æ˜¯ä¸ Java è¯­è¨€ä¸åŒã€‚åœ¨ Java ä¸­ï¼Œé€šç”¨çš„å¤„ç†é€»è¾‘ï¼ˆä¹Ÿå¯ä»¥ç§°ä¸ºåˆ‡é¢ï¼‰å¯ä»¥é€šè¿‡åå°„æ’å…¥åˆ°æ­£å¸¸é€»è¾‘çš„å¤„ç†æµç¨‹ä¸­ï¼Œåœ¨ Go è¯­è¨€ä¸­åŸºæœ¬ä¸è¿™æ ·åšã€‚

åœ¨ Go ä¸­ï¼Œä¸­é—´ä»¶æ˜¯é€šè¿‡å‡½æ•°é—­åŒ…æ¥å®ç°çš„ã€‚Go è¯­è¨€ä¸­çš„å‡½æ•°æ˜¯ç¬¬ä¸€ç±»å€¼ï¼Œæ—¢å¯ä»¥ä½œä¸ºå‚æ•°ä¼ ç»™å…¶ä»–å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼ä»å…¶ä»–å‡½æ•°è¿”å›ã€‚æˆ‘ä»¬å‰é¢ä»‹ç»äº†å¤„ç†å™¨/å‡½æ•°çš„ä½¿ç”¨å’Œå®ç°ã€‚é‚£ä¹ˆå¯ä»¥åˆ©ç”¨é—­åŒ…å°è£…å·²æœ‰çš„å¤„ç†å‡½æ•°ã€‚

é¦–å…ˆï¼ŒåŸºäºå‡½æ•°ç±»å‹`func(http.Handler) http.Handler`å®šä¹‰ä¸€ä¸ªä¸­é—´ä»¶ç±»å‹ï¼š
![[Pasted image 20250214113117.png]]

# å‘é€ http è¯·æ±‚

在 Linux 存储管理中，**逻辑卷管理 (LVM)** 是一种强大的工具，它提供了超越传统磁盘分区的灵活性和抽象层。LVM 的核心由三个主要组件组成：**物理卷 (PVs)**、**卷组 (VGs)** 和**逻辑卷 (LVs)**。

现在，让我们来详细解释 **卷组 (VG)** 和 `vgs` 命令。

---

### 卷组 (Volume Group, VG)

想象一下你的系统上有几个硬盘或分区。如果使用传统的磁盘分区，每个硬盘或分区都是一个独立的、固定大小的单元。如果你一个分区满了，就不能轻易地利用另一个分区的空间。这就是 LVM 和卷组的用武之地。

**卷组 (VG)** 本质上是一个**存储池**，它将一个或多个**物理卷 (PVs)** 组合在一起。你可以把它想象成一个逻辑容器，它汇集了你底层物理磁盘或分区的原始存储空间。

它的工作方式如下：

1. **物理卷 (Physical Volumes, PVs):** 首先，你需要将原始磁盘设备（如 `/dev/sda`、`/dev/sdb`）或分区（如 `/dev/sda1`、`/dev/sdb2`）标记为 LVM 的“物理卷”。这通过 `pvcreate` 命令完成。这些 PV 是 LVM 层次结构中的最底层。
    
2. **创建卷组:** 一旦你有一个或多个 PV，就可以使用 `vgcreate` 命令将它们组合成一个卷组。例如，如果你有两个 1TB 的 PV，你可以创建一个 2TB 的 VG。这个 2TB 就变成了一个统一的存储池。
    
3. **逻辑卷 (Logical Volumes, LVs):** 然后，你可以从这个巨大的存储池（VG）中，使用 `lvcreate` 命令“切割”出**逻辑卷 (LVs)**。LVs 就像灵活的分区，你可以用文件系统（如 ext4、XFS）格式化它们并挂载使用。LVs 的优点在于它们可以跨越同一个 VG 中的多个 PV，并且可以根据需要轻松调整大小（扩展或缩小），而无需重新分区物理磁盘。
    

#### 卷组的关键特性：

- **抽象层：** VG 作为物理存储设备和逻辑卷之间的一个关键抽象层。你不需要知道你的数据实际存储在哪个物理磁盘或分区上；LVM 会处理这些映射。
    
- **灵活性：** VG 允许你动态地管理存储。你可以：
    
    - 向现有 VG **添加更多 PV** 以增加其总大小 (`vgextend`)。
        
    - 从 VG 中**移除 PV** (`vgreduce`)，前提是这些 PV 上没有来自 LVs 的数据。
        
    - 在一个 VG 中创建多个 LV，每个都有不同的大小和用途。
        
- **集中式存储池：** 它们将分散的物理存储整合到一个单一的、连续的存储池中，简化了管理。
    

---

### `vgs` 命令

`vgs` 命令是 LVM 中一个常用且功能强大的实用程序，用于**显示卷组的信息**。它提供了对你的 VG 的快速、简洁且高度可定制的概览。

当你直接运行 `vgs` 命令时，它通常会显示系统上所有活动卷组的摘要，包括：

- **VG Name (卷组名称):** 卷组的名称（例如，`centos`、`my_data_vg`）。
    
- **#PV (物理卷数量):** 卷组中包含的物理卷数量。
    
- **#LV (逻辑卷数量):** 在卷组中创建的逻辑卷数量。
    
- **#SN (快照数量):** 卷组中的快照数量。
    
- **Attr (属性):** 卷组的属性（例如，`wz--n` 表示可写的卷组）。
    
- **VSize (总大小):** 卷组的总大小。
    
- **VFree (空闲空间):** 卷组中剩余的（未分配的）空闲空间量。
    

#### `vgs` 命令的示例输出：

```
  VG     #PV #LV #SN Attr   VSize   VFree
  centos   1   2   0 wz--n  <20.00g    0
  my_data  2   0   0 wz--n  <50.00g 50.00g
```

在这个例子中：

- `centos` 是一个卷组，包含 1 个物理卷和 2 个逻辑卷。它没有剩余的空闲空间。
    
- `my_data` 是一个卷组，包含 2 个物理卷，目前还没有创建逻辑卷。它有 50GB 的可用空闲空间。
    

#### 为什么使用 `vgs`？

- **快速概览：** 它是快速检查你的 LVM 设置的理想选择。
    
- **脚本化：** `vgs` 提供了丰富的格式化选项（使用 `-o` 标志），使其非常适合脚本编写和自动化报告。你可以精确指定要查看的列以及它们的格式。
    
- **定制化：** 与 `vgdisplay`（提供更详细但固定格式的输出）不同，`vgs` 允许你根据特定需求定制输出。
    

---

简而言之，卷组是 LVM 灵活性的支柱，它将物理存储汇集到一个单一的实体中。而 `vgs` 命令则是你快速、可定制地查看这些重要存储池的首选工具。

你是否想进一步了解 LVM 中的特定场景或命令？
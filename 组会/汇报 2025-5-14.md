纠正一个问题:
之前关于 config 这个设置问题，要把业务和容器设计解耦开，容器只是一个沙盒，里面具体跑什么业务不关心。

两个方向（两件事）：
- 计算图切分与合并（偏算法研究），后续跟进调研
- k8s 容器部署（工程设计）

# 计算图切分
如何做，定义评测标准：
- 模型性能不能下降很大
- 模型功耗开销应大幅降低

这里可以定义为模型的优化，

![[计算图切分.drawio.png]]


优化后的新模型，本质与原模型本质上可能只是冗余性消除，模型更精简，一些层被自动合并，所以这里实际工作就是添加一个中间层，

这里如何算子融合，没有一个系统的认识，业界也没有一个标准，在很多论文都只是作为它们自己的一个创新点，这个流程并且应该也会被自动化完成。

这里就是算法上的研究，如何完成一个系统的算子融合，


# 容器部署
这里算子切分后，还不是前面这个算子，在做容器部署，这里拿到的是整个 dpk 目录文件夹，这里拆分指的是如何拆分整个 dpk 目录，这里拆的逻辑是考虑应该是尽量让每个容器的负载尽可能接近。

关于这里整个业务的可靠性，可扩展性，可维护性。也就是容器编排，这里完全可以用 k8s 来做运维。

这里是多 pod 副本的一种设计方式

![[k8s+os+darwin.drawio (1).png]]


两个 demo

这里能把模型部署到 k8s，下面接的是传统架构，

因为 k8s 可以高度定制化，有一个 device plugin 插件，可以去管理不同的硬件资源（GPU），这里想着能不能去管理 Darwin3 芯片，中间层是用 OS，这里还没有深入去了解，后续跟魏老师探讨这里的可行性，最终效果就是 k8s 编排的容器（里面可能跑一些推理业务，Spike-deepseek，或者一些简单的小模型），下面掉的资源就是 Darwin 类脑芯片。

![[k8s+os+darwin.drawio.png]]





# Q
计算图拆分，每一个算子容器化，容器化部署，为什么要这么做，一个简单的做法就是容器里跑整个模型。出发点：
- 整个模型太大，如果模型有坏，需要重新部署整个模型
- 算子容器化部署，


